import { TestBed } from '@angular/core/testing';
import { User } from './user';
import { OAuthToken } from './oauth-token';

describe('User', () => {
  beforeEach(() => TestBed.configureTestingModule({}));

  it('created user should be decoded', () => {
    let token: OAuthToken = {
      access_token: "eyJraWQiOiJUWjRVVGpkeGt6a2dlZjNkNFRhQTZOd090TlB2Rmh4TFNnS1lqeWJzek5FPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJlY2VkYTU3OC1lY2QzLTQ1MzEtYmUzZC1lN2U2ZWU3YzJiNzYiLCJ0b2tlbl91c2UiOiJhY2Nlc3MiLCJzY29wZSI6Im9wZW5pZCBlbWFpbCIsImF1dGhfdGltZSI6MTU0Njg0ODcyMSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tXC91cy1lYXN0LTFfQVBOWmhESnFFIiwiZXhwIjoxNTQ2ODUyMzIxLCJpYXQiOjE1NDY4NDg3MjEsInZlcnNpb24iOjIsImp0aSI6IjMyZDAyM2ZhLWMzNGEtNGQxZi05YTcyLTVkNjYwY2Q4MWRhMSIsImNsaWVudF9pZCI6Im5yM25qc25wdmwyNWNtZmVsMDc2aXV2cHUiLCJ1c2VybmFtZSI6ImVjZWRhNTc4LWVjZDMtNDUzMS1iZTNkLWU3ZTZlZTdjMmI3NiJ9.U5u5eBBaH1ZY1TEPTBOMaLiFeIKU6luWHTULMBGjUdTbRl_fhAmhLDRR7vcuD1QdPYTtqbYffmsokm3NBsciQPVGa16ps2p3JmlvBsRRwKj5kAoQVRVntgq0H67wrh71Lh4FHr2vqNJfqnteubghe80bMg7WMW5KEsdc0yy-HdzwBHKO_wH58FXpvStK8WflNxvG_NFHmo8X0_Bt67yW4A4toxlcOylIn-kESkDfmxwktcHogVmkovzKO53_0L-L79iYswxDRuBCqaelLY7I6BaB6gC2JGLYDKty1jH4JFxsNQTCTToQmtQlGA5qqlT51HzNGOyW_Mjhc8K6ORkOdA",
      refresh_token: "eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.sqnIhihOzV90plRsFrOfzCzU3b5zTnYG1CEO9DQdarLWC_xDtmQcVFcpEgSqQ9AWlnv0QkhJyt3CuDn6s9VtKXQHwnEufuFCn_XQYApUyMwquIUVBL2kwVZXAOD2SCrjTCEVRxnQwIvpXoN-KHo4OqQV8f892WnxIza-3_BYk4UZSZ97_sSrzsMn__5xaJho7YwRRiaJvd3ZIlgolbY1T8jdr5HVLoTjaUAqWR80hL9ungnum9jV9YnOEC1cv0ztkIl-iB4mRpQy8sJlrNjiz_ZIM_gpKEZKmQ1JuuX_e1srZOUErA3WjJKHYr8KGvziZB7tiC8WHSEWfw32GbS6BA.C-imR3IS_1Nhogpb.mCu6pBIR3DbLPFZLTNrUYXqNaKblQ-kg3tGOvCqCK9g9uw86qcnDyD1FVB0hmLFmfHPXz1o2xXk51tDZ7MRK8_pzBrwghw99Q_oY0Cujfvs5oOnjiDr2N767_j4NB05OeXy95Iio54ywry6BH_bXYPNyC6ncJqKLBE_0xcamUesf7RpspjzTq20-_3zHSfCpmw9PjW4H1tUQsoBo0ED50Kn6yU-JHbmy-tb6627eGBdb8RPzJ4wIF9SBuTESn-Ur78XXHQtNEGJm1aeeuhbEQgoe2Rq91aIDMNnbzZmuveRfMpnDxo_IqFvoc04wkIWJkIeXDIM1D34sSIJOss2STm0VgAlYeaQyfxQb3l9XfUnr2rJxKkphLo3vJ684oWPifZ1BKGgZK7_khR-5IG4fhrCIrkaHS_Hh00AVOOwW1p43j1ue4gOVAoVD8dLf9bug-ir2kP2nTsFW9SjPGxMd06n5Ja5mFmXB3oPOLwloXKfhNbvlylZau1a_eUZTIUg8bK5pAR88Fo1SY11sG3aZh9LZNAxv4pPQgU4QVVF0mEMG3gzFrM6FLt2zm62M7RrwueoY3fmzPVamau3KbxW7ww_cruDzEHPRZMuHQoc5zZZ8euDWkYGcsQiiIG6VhGhwlehVqcoVrvQuiQkGSCGorE8HlKtQkbKpQXIp8O88bCgHVS63U_XL00Ns27YVagryId-frJHOqmZOxQUGbXqGNUScTm6Jmx5bckP0jOGHNAhjP93gmFBVY2QvqlxX4IAvLhryT92uVVttzAXnXFBnIc_G-T-CvsQK6SEF1W4wucievB8p5bGD3I9kMj1TS5cYCJM2LI6sXTUDBFoj_X3X4kF-tf9vxuwi_OS8c-QZ0YS57gx6SpyKgOLGKTKzS9D97Xm5-Qhdg3H663xalLQwcFohcXWeCY461nB0EZb0f2v4NxzoRv4dqnV1zFyEKOWe9_udpFYgWe6kIH0l-9A1nb0I8ab1p9UTwVruusnP2iSD34M1wC767O5FJbZHJedeHzEWpLnIG5DCMoCTnLGz7d0MQqt3RsVlqfDvIWxQXH0fkRWX04nvH3Jfn94PZ9LHpyZVXCeLxrYQP7YRV_UaeN6uzdLDWBsgS-STdK8ZVcT2LvXxxN_rPcN4XWAjPDGHJzQTMXPoAOKCLV7SAWG4pdrbWi4I8SBNsZh2hZAU_LInUVi2iVbQWU1ZQA1GqSHtwsluSowSrbrfnu09jFcw_Es8.JNv2VVU7_tuV4NthUxJu-w",
      id_token: "eyJraWQiOiIwZnYxMmZ6c1dTYXQzWUdrVzJaV2Y4Y0JFUlhvVjB3SmFWU1wvWHdydVdEUT0iLCJhbGciOiJSUzI1NiJ9.eyJhdF9oYXNoIjoiOU9uSTMySk41a1dTM3p6QTdZaDFqdyIsInN1YiI6ImVjZWRhNTc4LWVjZDMtNDUzMS1iZTNkLWU3ZTZlZTdjMmI3NiIsImF1ZCI6Im5yM25qc25wdmwyNWNtZmVsMDc2aXV2cHUiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE1NDY4NTAyMzcsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC51cy1lYXN0LTEuYW1hem9uYXdzLmNvbVwvdXMtZWFzdC0xX0FQTlpoREpxRSIsImNvZ25pdG86dXNlcm5hbWUiOiJlY2VkYTU3OC1lY2QzLTQ1MzEtYmUzZC1lN2U2ZWU3YzJiNzYiLCJleHAiOjE1NDY4NTM4MzcsImlhdCI6MTU0Njg1MDIzNywiZW1haWwiOiJndWlsbGF1bWUudmluY2tlQGdtYWlsLmNvbSJ9.hBDLq8GmArzooldBtnSVcdCxRCr-jOXwt2qS3gD03HzgZ5cf8tnXl0r3ogWoOGy7xb-JDvB49o1KchYfJpNvmVN09hLq3nmomtcw2YFkJturg2UdW726EvNy9hl4Z5gLL5S4Yrem-UEK6HbXbhAqVGXc3YOWoPDN_BuzN178zgRs0WimnW5_WNtJ3frf7GB8XDbFC4DNrOADIJ5HG2_e5aIrZhdPt7G4QLMeQMj60Cl-mvDOdqvCZda5Q5CMz08aYqwQeluKBT_TA4X9gBXmmZKursEBJjZBbO7ICBaATsQs7g3FRHtTKUg7IC_GWmLxWt18bnj2opRgX8Pk-M-MMw",
      token_type: "Bearer",
      expires_in: 3600
    }
    let user = User.fromToken(token);
    expect(user.username).toBe("eceda578-ecd3-4531-be3d-e7e6ee7c2b76");
    expect(user.email).toBe("guillaume.vincke@gmail.com");
  });
});
